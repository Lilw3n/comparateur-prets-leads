var viwcaio_atc=[];jQuery(document).ready(function(r){"use strict";if(typeof viwcaio_ajax_atc_params==="undefined"){return false}if(viwcaio_ajax_atc_params.ajax_atc==1){r(document).on("click","form:not(.woocommerce-boost-sales-cart-form) .single_add_to_cart_button:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-atc-loading)",function(a){a.preventDefault();a.stopPropagation();let i=r(this),t=r(this).closest("form.cart");i.addClass("vi-wcaio-product-bt-atc-loading");if(i.hasClass("disabled")){i.removeClass("vi-wcaio-product-bt-atc-loading");return false}if(t.hasClass(".variations_form")){let a=parseInt(t.find("input[name=variation_id]").val());if(!a||a<=0){i.removeClass("vi-wcaio-product-bt-atc-loading");return false}}let o=t.find("input[name=product_id]").val();if(!o){o=t.find("[name=add-to-cart]").val()}if(!o||viwcaio_ajax_atc_params.ajax_atc_pd_exclude.indexOf(o)!==-1||t.find('[name="woopb-add-to-cart"]').length){i.attr("type","submit").trigger("click");return false}let e={},c="";t.find("select, textarea, input").each(function(){if(r(this).prop("disabled")){return true}if(r(this).prop("required")&&!r(this).val()){c=r(this).get(0).validationMessage||"Please fill the required fields.";r(this).get(0).setCustomValidity("");r(this).trigger("focus");return false}});if(c){alert(c);i.removeClass("vi-wcaio-product-bt-atc-loading");a.preventDefault();a.stopPropagation();a.stopImmediatePropagation();return false}e=new FormData(t[0]);if(!e.get("add-to-cart")){e.set("add-to-cart",t.find("[name=add-to-cart]").val())}e.set("vicaio_nonce",viwcaio_ajax_atc_params.nonce);e.set("viwcaio_ajax_atc",1);viwcaio_atc.push({type:"post",url:viwcaio_ajax_atc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_add_to_cart"),data:e,processData:false,cache:false,contentType:false,beforeSend:function(a){i.removeClass("added").addClass("loading")},success:function(a){if(a.error){location.href=window.location.href;return false}if(viwcaio_ajax_atc_params.cart_redirect_after_add==="yes"){window.location=viwcaio_ajax_atc_params.cart_url;return false}r(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,i]);if(!viwcaio_ajax_atc_params.woocommerce_enable_ajax_add_to_cart||typeof wc_cart_fragments_params==="undefined"){r(document).trigger("viwcaio_after_update_cart",[a])}r(document.body).trigger("vi_wcaio_added_to_cart",[a.fragments,a.cart_hash,i]);viwcaio_atc.shift();if(viwcaio_atc.length>0){r.ajax(viwcaio_atc[0])}else{r(document.body).trigger("update_checkout")}},complete:function(a){i.removeClass("loading vi-wcaio-product-bt-atc-loading").addClass("added")}});if(viwcaio_atc.length===1){r.ajax(viwcaio_atc[0])}})}r(document).on("click",".vi-wcaio-product-bt-atc:not(.vicatna-single-atc-button):not(.vi-wcaio-product-bt-not-atc):not(.vi-wcaio-product-bt-atc-loading):not(.vi-wcaio-product-bt-atc-non-ajax)",function(a){a.preventDefault();a.stopPropagation();let i=r(this),t=r(this).closest(".vi-wcaio-va-cart-form");i.addClass("vi-wcaio-product-bt-atc-loading").removeClass("added");let o=true;t.find(".vi-wcaio-attribute-options").each(function(a,i){if(!r(i).val()){o=false;return false}});if(!o){if(!r(".vi-wcaio-warning-wrap").length){r("body").append('<div class="vi-wcaio-warning-wrap vi-wcaio-warning-wrap-open">'+viwcaio_ajax_atc_params.i18n_make_a_selection_text+"</div>")}else{r(".vi-wcaio-warning-wrap").removeClass("vi-wcaio-warning-wrap-close").addClass("vi-wcaio-warning-wrap-open").html(viwcaio_ajax_atc_params.i18n_make_a_selection_text)}setTimeout(function(){r(".vi-wcaio-warning-wrap").addClass("vi-wcaio-warning-wrap-close").removeClass("vi-wcaio-warning-wrap-open")},2e3);i.removeClass("vi-wcaio-product-bt-atc-loading");return false}if(i.hasClass("vi-wcaio-button-swatches-disable")||i.hasClass("vi-wcaio-product-bt-atc-disabled")){if(!r(".vi-wcaio-warning-wrap").length){r("body").append('<div class="vi-wcaio-warning-wrap vi-wcaio-warning-wrap-open">'+viwcaio_ajax_atc_params.i18n_unavailable_text+"</div>")}else{r(".vi-wcaio-warning-wrap").removeClass("vi-wcaio-warning-wrap-close").addClass("vi-wcaio-warning-wrap-open").html(viwcaio_ajax_atc_params.i18n_unavailable_text)}setTimeout(function(){r(".vi-wcaio-warning-wrap").addClass("vi-wcaio-warning-wrap-close").removeClass("vi-wcaio-warning-wrap-open")},2e3);i.removeClass("vi-wcaio-product-bt-atc-loading");return false}if(t.hasClass("vi-wcaio-va-cart-form")){i.data("quantity",t.find("input.vi-wcaio-va-qty-input").val()||0)}let e=t.find("select, input").serialize();if(e.search("vicaio_nonce")===-1){e+="&vicaio_nonce="+viwcaio_ajax_atc_params.nonce}viwcaio_atc.push({type:"post",url:viwcaio_ajax_atc_params.wc_ajax_url.toString().replace("%%endpoint%%","viwcaio_add_to_cart"),data:e,beforeSend:function(a){t.addClass("vi-wcaio-va-cart-form-loading")},success:function(a){if(a.error){location.href=window.location.href;return false}if(viwcaio_ajax_atc_params.cart_redirect_after_add==="yes"){window.location=viwcaio_ajax_atc_params.cart_url;return false}r(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,i]);if(!viwcaio_ajax_atc_params.woocommerce_enable_ajax_add_to_cart||typeof wc_cart_fragments_params==="undefined"){r(document).trigger("viwcaio_after_update_cart",[a])}r(document.body).trigger("vi_wcaio_added_to_cart",[a.fragments,a.cart_hash,i]);viwcaio_atc.shift();if(viwcaio_atc.length>0){r.ajax(viwcaio_atc[0])}else{r(document.body).trigger("update_checkout")}},complete:function(a){i.removeClass("vi-wcaio-product-bt-atc-loading");t.closest(".vi-wcaio-va-cart-form-wrap-wrap").remove()}});if(viwcaio_atc.length===1){r.ajax(viwcaio_atc[0])}})});