jQuery(document).ready(function(e){"use strict";"undefined"!=typeof vifewc_param&&(setTimeout(function(){e(document).trigger("vifewc_checkout_fields_html")},100),e(document).on("change",'[type="checkbox"]',function(){let i=e(this).parent().find('input[type="hidden"]');e(this).prop("checked")?i.val("1"):i.val("")}),e(document).on("click",".vifewc-field-btn-save:not(.loading)",function(i){let t=e(".vifewc-field-btn-save");t.addClass("loading"),console.log(vifewc_param),e.ajax({url:vifewc_param.ajax_url,type:"POST",data:{action:"fewc_checkout_save",section_fields:JSON.stringify(vifewc_param.section_fields),section_settings:JSON.stringify(vifewc_param.section_settings),section_id:JSON.stringify(vifewc_param.section_ids),nonce:vifewc_param.nonce},success:function(i){t.removeClass("loading"),i?.message&&e(document.body).trigger("villatheme_show_message",[i.message,[i.status],"",!1,4500])},error:function(e){console.log(e),t.removeClass("loading")}})}),e(document).on("click",".vifewc-field-btn-reset",function(i){let t=vifewc_param.section_fields,c=e(".fewc-section-fields-wrap").data("section_id");if(!c||!vifewc_param.section_fields_default[c]||!confirm("Changes you made may be overridden by default."))return!1;t[c]=vifewc_param.section_fields_default[c],vifewc_param.section_fields=t,setTimeout(function(i){e(document.body).trigger("vifewc_checkout_fields_html",[i])},100,c)}),e(document).on("click",".vifewc-popup-close, .vifewc-overlay:not(.vifewc-overlay-loading)",function(i){let t=e(this).closest(".vifewc-popup-wrap");t.hasClass("vifewc-popup-wrap-show")&&t.removeClass("vifewc-popup-wrap-show").addClass("vifewc-popup-wrap-hidden"),e(".fewc-field-editing").removeClass("fewc-field-editing"),setTimeout(function(i){e(i).remove()},100,t)}),e(document).on("click",".fewc-section-field-edit, .vifewc-field-btn-add",function(i){e(this).closest(".fewc-section-field-wrap").addClass("fewc-field-editing"),e(".vifewc-popup-wrap-field-info").length||e(document).trigger("vifewc_popup_checkout_field_html")}),e(document).on("click",".fewc-section-field-enable, .fewc-section-field-disable",function(i){e(this).closest(".fewc-section-field-wrap").addClass("fewc-field-editing");let t=e(".fewc-section-fields-wrap").data("section_id"),c=e(".fewc-field-editing").data("id"),n=vifewc_param.section_fields;if(!t||!c)return e(document.body).trigger("villatheme_show_message",["Can not change field data",["error","save-field"],"",!1,4500]),!1;let d=n[t][c]||{};e(".fewc-field-editing").removeClass("fewc-section-field-wrap-enable"),e(this).hasClass("fewc-section-field-enable")?(d.enable="",e(".fewc-field-editing").find(".fewc-section-field-disable").removeClass("vifewc-hidden"),e(".fewc-field-editing").find(".fewc-section-field-enable").addClass("vifewc-hidden")):(d.enable=1,e(".fewc-field-editing").addClass("fewc-section-field-wrap-enable"),e(".fewc-field-editing").find(".fewc-section-field-disable").addClass("vifewc-hidden"),e(".fewc-field-editing").find(".fewc-section-field-enable").removeClass("vifewc-hidden")),n[t][c]=d,vifewc_param.section_fields=n,e(".fewc-field-editing").removeClass("fewc-field-editing")}),e(document).on("click",".fewc-section-field-clone",function(i){let t=vifewc_param.section_fields,c=e(".fewc-section-fields-wrap"),n=e(this).closest(".fewc-section-field-wrap"),d=c.data("section_id"),l=n.data("id"),a=n.clone(),o=Date.now(),f=t[d]||{},p=d+"_"+Date.now(),s={...f[l]||{}},v=s.label||s.meta_key.replace(d+"_","")||l;s.label="Copy of "+v,s.meta_key=d+"_"+s.type+"_"+o,a.data({id:p,data:s}),a.find(".fewc-section-field-label").html(s.label),a.find(".fewc-section-field-type").html(s.type),a.find(".fewc-section-field-id").html(s.meta_key),s.enable&&s.required&&a.find(".fewc-section-field-id").append('<span>&nbsp;<abbr class="required">*</abbr></span>'),n.after(a),f[p]=s,vifewc_param.section_fields[d]=f,setTimeout(function(){e(document.body).trigger("vifewc_checkout_fields_sortable")},100)}),e(document).on("click",".fewc-section-field-remove",function(i){if(!confirm(vifewc_param.i18n.field_remove))return!1;let t=vifewc_param.section_fields,c=e(".fewc-section-fields-wrap"),n=e(this).closest(".fewc-section-field-wrap"),d=c.data("section_id"),l=n.data("id"),a=t[d]||{},o=vifewc_param.section_fields_default[d]||{};if(!d||!l||void 0!==o[l]||void 0===a[l])return e(document.body).trigger("villatheme_show_message",[vifewc_param.i18n.error_remove_field,["error","edit-field"],"",!1,4500]),!1;n.remove(),delete a[l],vifewc_param.section_fields[d]=a,setTimeout(function(){e(document.body).trigger("vifewc_checkout_fields_sortable")},100)}),e(document).on("click",".fewc-edit-field-bt-save:not(.loading)",function(i){i.preventDefault(),i.stopPropagation();let t=e(this).closest(".vifewc-popup-wrap"),c=t.find(".vifewc-edit-field-section-id").val(),n=t.find(".vifewc-edit-field-id").val();if(!c||!n)return e(document.body).trigger("villatheme_show_message",["Can not save field data",["error","save-field"],"",!1,4500]),!1;if(t.find(".vifewc-warning-wrap:not(.vifewc-edit-field-option-value):not(.vifewc-edit-field-option-label)").length)return e(document.body).trigger("villatheme_show_message",["Please insert all valid information.",["error","save-field"],"",!1,4500]),!1;let d=t.find(".vifewc-edit-field-save_as").dropdown("get value"),l=t.find(".vifewc-edit-field-meta_key").val()||"";if(d.length&&!l)return e(document.body).trigger("villatheme_show_message",["Meta key name can not be empty.",["error","save-field"],"",!1,4500]),!1;e(this).addClass("loading");let a=vifewc_param.section_fields;a[c]||(a[c]={});let o=a[c][n]||{};if(o.maxlength="",o.max="",o.min="",o.step="",o.save_as=d,o.meta_key=l,t.find("input, select, textarea").each(function(i,t){let c=e(t).attr("name");if(!c||["save_as","meta_key"].includes(c))return!0;e(t).is("select")?(o[c]="validate"===c?[e(t).closest(".dropdown").dropdown("get value")]:e(t).closest(".dropdown").dropdown("get value"),"type"===c&&"datetime"===o[c]&&(o[c]=e(".vifewc-edit-field-time-type").dropdown("get value"))):["class","label_class","input_class"].includes(c)?e(t).val()&&(o[c]=e(t).val().split(",")):o[c]=e(t).val()||""}),["checkbox_group","select","radio"].includes(o.type)){let i,c={},n={},d={},l="checkbox_group"===o.type?[]:"";if(t.find(".vifewc-edit-field-option-wrap .vifewc-warning-wrap").removeClass("vifewc-warning-wrap"),t.find(".vifewc-edit-field-option-wrap").each(function(t,a){let f=e(a).find(".vifewc-edit-field-option-value").val(),p=e(a).find(".vifewc-edit-field-option-label").val();return f||"checkbox_group"!==o.type&&void 0===c[f]?f.indexOf(" ")>-1||f.indexOf('"')>-1||f.indexOf("'")>-1?(e(a).find(".vifewc-edit-field-option-value").addClass("vifewc-warning-wrap"),i=vifewc_param.i18n.error_option_value_invalid,!1):c[f]?(e(a).find(".vifewc-edit-field-option-value").addClass("vifewc-warning-wrap"),i=vifewc_param.i18n.error_option_value_unique,!1):p?(d[t]=f,c[f]=p,e(a).find(".vifewc-edit-field-option-checkbox").prop("checked")&&("object"==typeof l?l.push(f):l=f),void(n[f]={value:f,label:p,is_selected:e(a).find(".vifewc-edit-field-option-checkbox").prop("checked")?1:""})):(e(a).find(".vifewc-edit-field-option-label").addClass("vifewc-warning-wrap"),i=vifewc_param.i18n.error_option_label_empty,!1):(e(a).find(".vifewc-edit-field-option-value").addClass("vifewc-warning-wrap"),i=vifewc_param.i18n.error_option_value_empty,!1)}),i)return e(document.body).trigger("villatheme_show_message",[i,["error","edit-field"],"",!1,4500]),e(this).removeClass("loading"),!1;o.options=c,o.vifewc_options=n,o.vifewc_options_id=d,o.default=l}if(a[c][n])a[c][n]=o,vifewc_param.section_fields=a,e(".fewc-field-editing").removeClass("fewc-section-field-wrap-enable").data("data",o),o.enable?(e(".fewc-field-editing").addClass("fewc-section-field-wrap-enable"),e(".fewc-field-editing").find(".fewc-section-field-disable").addClass("vifewc-hidden"),e(".fewc-field-editing").find(".fewc-section-field-enable").removeClass("vifewc-hidden")):(e(".fewc-field-editing").find(".fewc-section-field-disable").removeClass("vifewc-hidden"),e(".fewc-field-editing").find(".fewc-section-field-enable").addClass("vifewc-hidden")),e(".fewc-field-editing").find(".fewc-section-field-label").html(o.label||l.replace(c+"_","")),e(".fewc-field-editing").find(".fewc-section-field-type").html(o.type),e(".fewc-field-editing").find(".fewc-section-field-id").find("span").remove(),o.enable&&o.required&&e(".fewc-field-editing").find(".fewc-section-field-id").append('<span>&nbsp;<abbr class="required">*</abbr></span>');else{l===c+"_"&&(l+=o.type+"_"+n.replace(l,"")),o.meta_key=l,a[c][n]=o,vifewc_param.section_fields=a;let i=`\n            <tr class="fewc-section-field-wrap${o.enable?" fewc-section-field-wrap-enable":""}">\n                <td class="sort"><i class="dashicons dashicons-menu"></i></td>\n                <td class="fewc-section-field-id">${o.meta_key}<span>${o.required?'&nbsp;<abbr class="required">*</abbr>':""}</span></td>\n                <td class="fewc-section-field-label">${o.label||l.replace(c+"_","")}</td>\n                <td class="fewc-section-field-type">${o.type}</td>\n                <td class="fewc-section-field-action">\n                    <span class="fewc-section-field-edit" title="${vifewc_param.i18n.edit}"><i class="vi-ui icon edit outline"></i></span>\n                    <span class="fewc-section-field-clone" title="${vifewc_param.i18n.clone}"><i class="vi-ui icon clone outline"></i></span>\n                    <span class="fewc-section-field-remove" title="${vifewc_param.i18n.remove}"><i class="vi-ui icon trash alternate outline"></i></span>\n                    <span class="fewc-section-field-enable${o.enable?"":" vifewc-hidden"}" title="${vifewc_param.i18n.disable}"><i class="dashicons dashicons-visibility"></i></span>\n                    <span class="fewc-section-field-disable${o.enable?" vifewc-hidden":""}" title="${vifewc_param.i18n.enable}"><i class="dashicons dashicons-hidden"></i></span>\n                </td>\n            </tr>`;i=e(i),i.data({id:n,data:o}),e(".fewc-section-fields-sort").append(i),e(document).trigger("vifewc_checkout_fields_sortable")}setTimeout(function(){e(".vifewc-popup-close").trigger("click")},100)}),e(document).on("vifewc_popup_checkout_field_validation_min_max",function(i){e('.vifewc-edit-field-type-info-wrap [name="min"], .vifewc-edit-field-type-info-wrap [name="max"], .vifewc-edit-field-type-info-wrap [name="default"]').removeClass("vifewc-warning-wrap");let t=e('.vifewc-edit-field-type-info-wrap [name="min"]').val()??"",c=e('.vifewc-edit-field-type-info-wrap [name="max"]').val()??"",n=e('.vifewc-edit-field-type-info-wrap [name="default"]').val()??"";return"number"===e(".vifewc-edit-field-type").dropdown("get value")&&(t=t?parseFloat(t):t,c=c?parseFloat(c):c,n=n?parseFloat(n):n),n&&t&&n<t?(e('.vifewc-edit-field-type-info-wrap [name="min"], .vifewc-edit-field-type-info-wrap [name="default"]').addClass("vifewc-warning-wrap"),e(document.body).trigger("villatheme_show_message",["Default Value must be greater or equal than Minimum Value",["error","save-field"],"",!1,4500]),!1):n&&c&&n>c?(e(' .vifewc-edit-field-type-info-wrap [name="max"], .vifewc-edit-field-type-info-wrap [name="default"]').addClass("vifewc-warning-wrap"),e(document.body).trigger("villatheme_show_message",["Default Value must be less or equal than Maximum Value",["error","save-field"],"",!1,4500]),!1):t&&c&&t>c?(e('.vifewc-edit-field-type-info-wrap [name="min"], .vifewc-edit-field-type-info-wrap [name="max"]').addClass("vifewc-warning-wrap"),e(document.body).trigger("villatheme_show_message",["Minimum Value must be less or equal than Maximum Value",["error","save-field"],"",!1,4500]),!1):void 0}),e(document).on("change",'.vifewc-edit-field-type-info-wrap [name="min"], .vifewc-edit-field-type-info-wrap [name="max"], .vifewc-edit-field-type-info-wrap [name="default"]',function(i){e(document).trigger("vifewc_popup_checkout_field_validation_min_max")}),e(document).on("change",'.vifewc-edit-field-type-info-wrap [name="step"]',function(i){if(e(this).removeClass("vifewc-warning-wrap"),e(this).val()<1)return e(this).addClass("vifewc-warning-wrap"),e(document.body).trigger("villatheme_show_message",["Step must be greater or equal than 1",["error","save-field"],"",!1,4500]),!1}),e(document).on("change",".vifewc-edit-field-option-checkbox",function(i){if("checkbox_group"===e(".vifewc-edit-field-type").dropdown("get value"))return!1;let t=e(this).closest(".vifewc-edit-field-options-wrap");e(this).addClass("vifewc-edit-field-option-checkbox1"),t.find(".vifewc-edit-field-option-checkbox:not(.vifewc-edit-field-option-checkbox1)").prop("checked",!1),e(this).removeClass("vifewc-edit-field-option-checkbox1")}),e(document).on("click",".vifewc-edit-field-option-clone",function(i){let t=e(this).closest(".vifewc-edit-field-option-wrap");if(!t.find(".vifewc-edit-field-option-value").val()&&e(".vifewc-popup-wrap-field-info .vifewc-edit-field-option-wrap").index(t)>0)return e(document.body).trigger("villatheme_show_message",[vifewc_param.i18n.error_option_value_empty,["error","edit-field"],"",!1,4500]),!1;if(!t.find(".vifewc-edit-field-option-label").val())return e(document.body).trigger("villatheme_show_message",[vifewc_param.i18n.error_option_label_empty,["error","edit-field"],"",!1,4500]),!1;let c=t.clone();c.find("input").val(""),c.find("input.vifewc-edit-field-option-checkbox").prop("checked",!1),t.after(c)}),e(document).on("click",".vifewc-edit-field-option-remove",function(i){if(1===e(".vifewc-edit-field-option-wrap").length)return e(document.body).trigger("villatheme_show_message",[vifewc_param.i18n.error_remove_last_item,["error","edit-field"],"",!1,4500]),!1;confirm(vifewc_param.i18n.field_option_remove)&&e(this).closest(".vifewc-edit-field-option-wrap").remove()}),e(document).on("vifewc_popup_checkout_field_type_html",function(i,t,c,n,d){if(!t)return!1;let l="";switch(t){case"email":case"tel":case"url":l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_placeholder}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="text" name="placeholder" class="vifewc-edit-field-placeholder" value="${d.placeholder||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_default}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="text" name="default" class="vifewc-edit-field-default" value="${d.default||""}">`,l+="</div></div></div>";break;case"number":l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_placeholder}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="text" name="placeholder" class="vifewc-edit-field-placeholder" value="${d.placeholder||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_default}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="number" name="default" class="vifewc-edit-field-default" value="${d.default||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_step}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="number" name="step" class="vifewc-edit-field-min" min="1" value="${d.step||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_minvalue}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="number" name="min" class="vifewc-edit-field-min" value="${d.min||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_maxvalue}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="number" name="max" class="vifewc-edit-field-max" value="${d.max||""}">`,l+="</div></div></div>";break;case"text":l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_placeholder}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="text" name="placeholder" class="vifewc-edit-field-placeholder" value="${d.placeholder||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_default}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="text" name="default" class="vifewc-edit-field-default" value="${d.default||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_minlength}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="number" name="minlength" class="vifewc-edit-field-minlength" value="${d.minlength||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_maxlength}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="number" name="maxlength" class="vifewc-edit-field-maxlength" value="${d.maxlength||""}">`,l+="</div></div></div>";break;case"textarea":l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_placeholder}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<textarea name="placeholder" class="vifewc-edit-field-placeholder" cols="30" rows="5">${d.placeholder||""}</textarea>`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_default}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<textarea name="default" class="vifewc-edit-field-default" cols="30" rows="5">${d.default||""}</textarea>`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_minlength}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="number" name="minlength" class="vifewc-edit-field-minlength" value="${d.minlength||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_maxlength}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="number" name="maxlength" class="vifewc-edit-field-maxlength" value="${d.maxlength||""}">`,l+="</div></div></div>";break;case"checkbox":l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_checked_default}</div>`,l+='<div class="vifewc-popup-content-value">',l+='<div class="vi-ui toggle checkbox">',l+=`<input type="hidden" name="default" class="vifewc-edit-field-default" value="${d.default||""}">`,l+=`<input type="checkbox" class="vifewc-edit-field-default-checkbox vifewc-customize-checkbox" ${d.default?"checked":""}><label></label></div>`,l+="</div></div></div>";break;case"checkbox_group":case"select":case"radio":if("select"!==t){let i=d.checkboxgroup_style||"vertical";l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_checkboxgroup_style}</div>`,l+='<div class="vifewc-popup-content-value">',l+='<select class="vifewc-edit-field-checkboxgroup_style vi-ui fluid dropdown" name=checkboxgroup_style>',e.each(vifewc_param.checkboxgroup_style,function(e,t){l+=`<option value="${e}" ${i===e?" selected ":""}>${t}</option>`}),l+="</select>",l+="</div></div></div>"}l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-vertical vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_options}</div>`,l+='<div class="vifewc-popup-content-value vifewc-popup-content-field-options">',l+='<div class="vifewc-edit-field-options-wrap">';let i=d.vifewc_options_id||{},c=d.vifewc_options||{},n="checkbox_group"===t?vifewc_param.i18n.field_title_checked_default:vifewc_param.i18n.field_title_selected_default;if(Object.keys(c).length){let d=!1;e.each(i,function(e,i){let a=i,o=c[i],f=o.is_selected?"checked":"";"checkbox_group"!==t&d&&f&&(f=""),f&&(d=!0),l+='<div class="vifewc-edit-field-option-wrap">',l+='<span class="vifewc-edit-field-option-action vifewc-edit-field-option-move"><i class="expand arrows alternate icon"></i></span>',l+='<div class="vifewc-edit-field-option-container">',l+='<div class="vifewc-edit-field-option-value-wrap">',l+=`<input type="text" class="vifewc-edit-field-option-value" value="${a}" placeholder="${vifewc_param.i18n.field_title_option_value}">`,l+="</div>",l+='<div class="vifewc-edit-field-option-label-wrap">',l+=`<input type="text" class="vifewc-edit-field-option-label" value="${o.label||""}" placeholder="${vifewc_param.i18n.field_title_option_label}">`,l+="</div>",l+='<div class="vifewc-edit-field-option-checkbox-wrap">',l+=`<input type="checkbox" class="vifewc-edit-field-option-checkbox" ${f?"checked":""} title='${n}'>`,l+="</div>",l+="</div>",l+=`<span class="vifewc-edit-field-option-action vifewc-edit-field-option-clone" title="${vifewc_param.i18n.clone}"><i class="clone icon"></i></span>`,l+=`<span class="vifewc-edit-field-option-action vifewc-edit-field-option-remove" title="${vifewc_param.i18n.remove}"><i class="times icon"></i></span>`,l+="</div>"})}else l+='<div class="vifewc-edit-field-option-wrap">',l+='<span class="vifewc-edit-field-option-action vifewc-edit-field-option-move"><i class="expand arrows alternate icon"></i></span>',l+='<div class="vifewc-edit-field-option-container">',l+='<div class="vifewc-edit-field-option-value-wrap">',l+=`<input type="text" class="vifewc-edit-field-option-value" value="" placeholder="${vifewc_param.i18n.field_title_option_value}">`,l+="</div>",l+='<div class="vifewc-edit-field-option-label-wrap">',l+=`<input type="text" class="vifewc-edit-field-option-label" placeholder="${vifewc_param.i18n.field_title_option_label}">`,l+="</div>",l+='<div class="vifewc-edit-field-option-checkbox-wrap">',l+=`<input type="checkbox" class="vifewc-edit-field-option-checkbox" title='${n}'>`,l+="</div>",l+="</div>",l+=`<span class="vifewc-edit-field-option-action vifewc-edit-field-option-clone" title="${vifewc_param.i18n.clone}"><i class="clone icon"></i></span>`,l+=`<span class="vifewc-edit-field-option-action vifewc-edit-field-option-remove" title="${vifewc_param.i18n.remove}"><i class="times icon"></i></span>`,l+="</div>";l+="</div>",l+="</div></div></div>";break;case"datetime-local":case"time":case"date":case"week":case"month":l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_default}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="${t}" name="default" class="vifewc-edit-field-default" value="${d.default||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_minvalue}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="${t}" name="min" class="vifewc-edit-field-min" value="${d.min||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_maxvalue}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="${t}" name="max" class="vifewc-edit-field-max" value="${d.max||""}">`,l+="</div></div></div>";break;case"hidden":l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_default}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="text" name="default" class="vifewc-edit-field-default" value="${d.default||""}">`,l+="</div></div></div>";break;case"password":l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_placeholder}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="text" name="placeholder" class="vifewc-edit-field-placeholder" value="${d.placeholder||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_minlength}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="number" name="minlength" class="vifewc-edit-field-minlength" value="${d.minlength||""}">`,l+="</div></div></div>",l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_maxlength}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<input type="number" name="maxlength" class="vifewc-edit-field-maxlength" value="${d.maxlength||""}">`,l+="</div></div></div>";break;case"html":l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_content}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<textarea name="default" class="vifewc-edit-field-default" cols="30" rows="10">${d.default||""}</textarea>`,l+="</div></div></div>"}["html","hidden"].includes(t)||(l+='<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">',l+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',l+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_desc}</div>`,l+='<div class="vifewc-popup-content-value">',l+=`<textarea name="description" cols="30" rows="10" class="vifewc-edit-field-description">${d.description||""}</textarea>`,l+="</div></div></div>"),e(".vifewc-edit-field-type-info-wrap").addClass("vifewc-edit-field-type-info-wrap-old"),l&&(l=e(l),l.find(".vi-ui.dropdown").dropdown(),l.find(".vifewc-edit-field-options-wrap").sortable({connectWith:".vifewc-edit-field-option-wrap",handle:".vifewc-edit-field-option-move",placeholder:"vifewc-placeholder",axis:"y"}),setTimeout(function(i){e(".vifewc-edit-field-type-wrap-wrap").after(i),e(document).trigger("vifewc_popup_init")},100,l)),e(".vifewc-edit-field-type-info-wrap-old").animate({height:"0px"},400,"swing",function(){e(".vifewc-edit-field-type-info-wrap-old").remove()})}),e(document).on("vifewc_popup_checkout_field_html",function(){let i=e(".fewc-section-fields-wrap").data("section_id");if(!i)return!1;let t=vifewc_param.section_fields_default[i]||{},c=e(".fewc-field-editing").data("id")||i+"_"+Date.now(),n=e(".fewc-field-editing").data("data")||{},d=n.type??"text",l=n.enable??1,a=n.required??"",o=n.html_type??"",f=void 0===t[c]?1:"",p=n.display_in??(["html","hidden","password"].includes(d)?[]:Object.keys(vifewc_param.fields_display_in)),s=n.save_as??["order_meta"],v=n.class??["form-row-wide"],w=n.label_class??[],r=n.input_class??[],u=["html","hidden"];a=a?1:"",v=v.join(","),w=w.join(","),r=r.join(",");let m=`<div class="vifewc-popup-wrap vifewc-popup-wrap-field-info">\n        <div class="vifewc-popup">\n            <div class="vifewc-overlay vifewc-overlay-loading"></div>\n            <div class="vifewc-overlay"></div>\n            <div class="vifewc-popup-container-wrap">\n                <span class="vifewc-popup-close">&#43;</span>\n                <div class="vifewc-popup-container">\n                    <div class="vifewc-popup-header-wrap">${vifewc_param.i18n.field_info_title}</div>\n                    <div class="vifewc-popup-content-wrap">\n                        <div class="vi-ui fluid accordion">\n                            <div class="title active"><i class="dropdown icon"></i>${vifewc_param.i18n.field_general_title}</div>\n                            <div class="content active vifewc-popup-content-general-wrap">\n                                <div class="vifewc-popup-content-container">\n                                    <div class="vifewc-popup-content">\n                                        <div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">\n                                            <div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_enable}</div>\n                                            <div class="vifewc-popup-content-value">\n                                                <div class="vi-ui toggle checkbox">\n                                                    <input type="hidden" name="enable" class="vifewc-edit-field-enable" value="${l}">\n                                                    <input type="checkbox" class="vifewc-edit-field-enable-checkbox vifewc-customize-checkbox" ${l?"checked":""}><label></label>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="vifewc-popup-content vifewc-edit-field-required-wrap${u.includes(d)?" vifewc-hidden":""}">\n                                        <div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">\n                                            <div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_required}</div>\n                                            <div class="vifewc-popup-content-value">\n                                                <div class="vi-ui toggle checkbox">\n                                                <input type="hidden" name="required" class="vifewc-edit-field-required" value="${a}">\n                                                <input type="checkbox" class="vifewc-edit-field-required-checkbox vifewc-customize-checkbox" ${a?"checked":""}><label></label>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="vifewc-popup-content vifewc-edit-field-label-wrap">\n                                        <div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">\n                                            <div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_label}</div>\n                                            <div class="vifewc-popup-content-value">\n                                                <input type="hidden" class="vifewc-edit-field-section-id" value="${i}">\n                                                <input type="hidden" class="vifewc-edit-field-id" value="${c}">\n                                                <input type="hidden" name="is_custom" class="vifewc-edit-field-is_custom" value="${f}">\n                                                <input type="text" name="label" class="vifewc-edit-field-label" value="${n.label||""}">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="title"><i class="dropdown icon"></i>${vifewc_param.i18n.field_design_title}</div>\n                            <div class="content vifewc-popup-content-design-wrap">\n                                <div class="vifewc-popup-content-container">\n                                    <div class="vifewc-popup-content vifewc-popup-content-desc">\n                                        <div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row" title='${vifewc_param.i18n.wrap_class_desc}'>\n                                            <div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_class}<span class="vifewc-popup-content-tooltip"><i class="icon question circle outline"></i></span></div>\n                                            <div class="vifewc-popup-content-value">\n                                                <input type="text" name="class" class="vifewc-edit-field-class" value="${v}">\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="vifewc-popup-content vifewc-edit-field-label_class-wrap${"html"===d?" vifewc-hidden":""}">\n                                        <div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">\n                                            <div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_label_class}</div>\n                                            <div class="vifewc-popup-content-value">\n                                                <input type="text" name="label_class" class="vifewc-edit-field-label_class" value="${w}">\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="vifewc-popup-content vifewc-edit-field-input_class-wrap${"html"===d?" vifewc-hidden":""}">\n                                        <div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">\n                                            <div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_input_class}</div>\n                                            <div class="vifewc-popup-content-value">\n                                                <input type="text" name="input_class" class="vifewc-edit-field-input_class" value="${r}">\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="vifewc-popup-footer-wrap">\n                        <span class="vi-ui button mini primary vifewc-popup-bt fewc-edit-field-bt-save">${vifewc_param.i18n.save}</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        </div>`,_=e(m),h="";f?(h+='<div class="vifewc-popup-content vifewc-edit-field-type-wrap-wrap">',h+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',h+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_type}</div>`,h+='<div class="vifewc-popup-content-value">',h+='<div class="vifewc-edit-field-type-wrap">',h+='<select class="vifewc-edit-field-type vi-ui fluid dropdown" name="type">',e.each(vifewc_param.fields_type,function(e,i){h+=`<option value="${e}" ${d===e||void 0!==vifewc_param.fields_time_type[d]&&"datetime"===e?" selected ":""}>${i}</option>`}),h+="</select>",h+="</div>",h+=`<div class="vifewc-edit-field-html-type-wrap${"html"!==d?" vifewc-hidden":""}">`,h+='<select class="vifewc-edit-field-html-type vi-ui fluid dropdown" name="html_type">',e.each(vifewc_param.fields_html_type,function(i,t){h+=`<optgroup label="${t.name||""}">`,e.each(t.type||{},function(e,i){h+=`<option value="${e}" ${o===e?" selected ":""}>${i}</option>`}),h+="</optgroup>"}),h+="</select>",h+="</div>",h+=`<div class="vifewc-edit-field-time-type-wrap${void 0===vifewc_param.fields_time_type[d]?" vifewc-hidden":""}">`,h+='<select class="vifewc-edit-field-time-type vi-ui fluid dropdown" name="time_type">',e.each(vifewc_param.fields_time_type,function(e,i){h+=`<option value="${e}" ${d===e?" selected ":""}>${i}</option>`}),h+="</select>",h+="</div>",h+="</div></div></div>",e(document).trigger("vifewc_popup_checkout_field_type_html",[d,o,c,n]),h+=`<div class="vifewc-popup-content vifewc-edit-field-validate-wrap${["email","tel","number","text","url"].includes(d)?"":" vifewc-hidden"}">`,h+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',h+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_validation}</div>`,h+='<div class="vifewc-popup-content-value">',h+='<select class="vifewc-edit-field-validate vi-ui fluid dropdown" name="validate">',e.each(vifewc_param.field_validate,function(e,i){h+=`<option value="${e}" >${i}</option>`}),h+="</select>",h+="</div></div></div>"):["country","state"].includes(d)||(h=`<div class="vifewc-popup-content vifewc-edit-field-type-info-wrap">\n                                <div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">\n                                   <div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_placeholder}</div>\n                                   <div class="vifewc-popup-content-value">\n                                     <input type="text" name="placeholder" class="vifewc-edit-field-placeholder" value="${n.placeholder||""}">\n                                   </div>\n                                </div>\n                            </div>`),_.find(".vifewc-popup-content-general-wrap .vifewc-popup-content-container").append(h),f&&(h="",h+=`<div class="title"><i class="dropdown icon"></i>${vifewc_param.i18n.field_data_title}</div>`,h+='<div class="content"><div class="vifewc-popup-content-container">',h+=`<div class="vifewc-popup-content vifewc-edit-field-save_as-wrap${u.includes(d)?" vifewc-hidden":""}">`,h+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',h+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_save_as}</div>`,h+='<div class="vifewc-popup-content-value">',h+='<select class="vifewc-edit-field-save_as vi-ui fluid dropdown" multiple name=save_as>',e.each(vifewc_param.field_as_meta,function(e,i){h+=`<option value="${e}" >${i}</option>`}),h+="</select>",h+="</div></div></div>",h+=`<div class="vifewc-popup-content vifewc-edit-field-save_as-wrap vifewc-edit-field-meta_key-wrap${u.includes(d)||!s.length?" vifewc-hidden":""}">`,h+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',h+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_meta_key}<span class="vifewc-popup-content-tooltip" title='${vifewc_param.i18n.meta_key_desc}'><i class="icon question circle outline"></i></span></div>`,h+='<div class="vifewc-popup-content-value">',h+=`<input type="text" name="meta_key" class="vifewc-edit-field-meta_key" value="${n.meta_key??i+"_"}">`,h+="</div></div></div>",h+=`<div class="vifewc-popup-content vifewc-edit-field-display_in-wrap${u.includes(d)||!s.length?" vifewc-hidden":""}">`,h+='<div class="vifewc-popup-content-horizontal vifewc-popup-content-full-row">',h+=`<div class="vifewc-popup-content-title">${vifewc_param.i18n.field_title_display}</div>`,h+='<div class="vifewc-popup-content-value">',h+='<select class="vifewc-edit-field-display_in vi-ui fluid dropdown" multiple name="display_in">',e.each(vifewc_param.fields_display_in,function(e,i){h+=`<option value="${e}" >${i}</option>`}),h+="</select>",h+="</div></div></div>",h+="</div></div>",_.find(".accordion").append(h)),_.find(".vifewc-edit-field-type").addClass("vifewc-dropdown-init").dropdown({onChange:function(i){let t;console.log(i),["email","tel","number","text","url"].includes(i)?(_.find(".vifewc-edit-field-validate-wrap").removeClass("vifewc-hidden"),e(".vifewc-edit-field-default").val(null),e(".vi-ui.dropdown.vifewc-edit-field-validate").dropdown("set exactly","tel"===i?"phone":i)):(_.find(".vifewc-edit-field-validate-wrap").addClass("vifewc-hidden"),e(".vi-ui.dropdown.vifewc-edit-field-validate").dropdown("set exactly","")),u.includes(i)?("html"===i?_.find(".vifewc-edit-field-html-type-wrap").removeClass("vifewc-hidden"):_.find(".vifewc-edit-field-html-type-wrap").addClass("vifewc-hidden"),_.find(".vifewc-edit-field-time-type-wrap").addClass("vifewc-hidden"),_.find(".vifewc-edit-field-input_class-wrap").addClass("vifewc-hidden"),_.find(".vifewc-edit-field-label_class-wrap").addClass("vifewc-hidden"),_.find(".vifewc-edit-field-required-wrap").addClass("vifewc-hidden"),_.find(".vifewc-edit-field-save_as-wrap").addClass("vifewc-hidden"),_.find(".vifewc-edit-field-meta_key-wrap").addClass("vifewc-hidden"),_.find(".vifewc-edit-field-display_in-wrap").addClass("vifewc-hidden")):(_.find(".vifewc-edit-field-html-type-wrap").addClass("vifewc-hidden"),"datetime"===i?(i=_.find(".vifewc-edit-field-time-type").dropdown("get value")||"datetime-local",_.find(".vifewc-edit-field-time-type-wrap").removeClass("vifewc-hidden")):_.find(".vifewc-edit-field-time-type-wrap").addClass("vifewc-hidden"),_.find(".vifewc-edit-field-required-wrap").removeClass("vifewc-hidden"),_.find(".vifewc-edit-field-save_as-wrap").removeClass("vifewc-hidden"),_.find(".vifewc-edit-field-input_class-wrap").removeClass("vifewc-hidden"),_.find(".vifewc-edit-field-label_class-wrap").removeClass("vifewc-hidden"),_.find(".vifewc-edit-field-save_as").dropdown("get value").length?(_.find(".vifewc-edit-field-meta_key-wrap").removeClass("vifewc-hidden"),_.find(".vifewc-edit-field-display_in-wrap").removeClass("vifewc-hidden")):(_.find(".vifewc-edit-field-meta_key-wrap").addClass("vifewc-hidden"),_.find(".vifewc-edit-field-display_in-wrap").addClass("vifewc-hidden"))),t=["$html","hidden","password"].includes(i)?[]:n.display_in??Object.keys(vifewc_param.fields_display_in),_.find(".vifewc-edit-field-display_in").off().dropdown("set exactly",t),e(document.body).trigger("vifewc_popup_checkout_field_type_html",[i,"html"===i?_.find(".vifewc-edit-field-html-type").dropdown("get value"):"",c,n])}}),_.find(".vifewc-edit-field-html-type").addClass("vifewc-dropdown-init").dropdown({onChange:function(i){e(document.body).trigger("vifewc_popup_checkout_field_type_html",["html",i,c,n])}}),_.find(".vifewc-edit-field-time-type").addClass("vifewc-dropdown-init").dropdown({onChange:function(i){e(document.body).trigger("vifewc_popup_checkout_field_type_html",[i,"",c,n])}}),_.find(".vifewc-edit-field-save_as-wrap:not(.vifewc-hidden) .vifewc-edit-field-save_as").addClass("vifewc-dropdown-init").dropdown({onChange:function(e){e&&e.length?(_.find(".vifewc-edit-field-meta_key-wrap").removeClass("vifewc-hidden"),_.find(".vifewc-edit-field-display_in-wrap").removeClass("vifewc-hidden")):(_.find(".vifewc-edit-field-meta_key-wrap").addClass("vifewc-hidden"),_.find(".vifewc-edit-field-display_in-wrap").addClass("vifewc-hidden"))}}),e("body").append(_),setTimeout(function(){e(document).trigger("vifewc_popup_init");let i=e(".vifewc-popup-wrap-field-info");i.find(".vi-ui.dropdown.selection").has("optgroup").each(function(){let i=e("<div/>").addClass("menu");return e(this).find("optgroup").each(function(){return i.append('<div class="vifewc-dropdown-header">'+this.label+"</div></div>"),e(this).children().each(function(){return i.append('<div class="item" data-value="'+this.value+'">'+this.innerHTML+"</div>")})}),e(this).find(".menu").html(i.html())}),i.find(".vifewc-edit-field-save_as").dropdown("set selected",s),i.find(".vifewc-edit-field-display_in").dropdown("set selected",p),i.find(".vifewc-edit-field-validate").dropdown("set selected",n.validate&&n.validate[0]||""),i.removeClass("vifewc-popup-wrap-hidden").addClass("vifewc-popup-wrap-show")},100)}),e(document).on("vifewc_checkout_fields_html",function(i,t=""){if(t||(t=location.hash.replace("#","")),t&&vifewc_param.section_fields[t]||(t=e(".vifewc-sections-container .item.active").eq(0).data("tab")||e(".vifewc-sections-container .item").eq(0).data("tab")),!t)return;e(".menu .item.active").removeClass("active"),e('.menu .item[data-tab="'+t+'"]').addClass("active"),location.hash="#"+t,e(".fewc-loading-btn").removeClass("vifewc-hidden"),e(".fewc-section-fields-wrap").data("section_id",t),e(".fewc-section-fields-wrap, .vifewc-field-btn-reset").addClass("vifewc-hidden"),e(".fewc-section-fields-sort").html("");let c=vifewc_param.section_fields[t]||{},n=vifewc_param.section_fields_default[t]||{};Object.keys(n).length&&e(".vifewc-field-btn-reset").removeClass("vifewc-hidden"),e.each(c,function(i,c){let d="",l=c.enable??1;d=`<tr class="fewc-section-field-wrap${l?" fewc-section-field-wrap-enable":""}">\n            <td class="sort"><i class="dashicons dashicons-menu"></i></td>\n            <td class="fewc-section-field-id">\n            ${i}<span>${c.required?'&nbsp;<abbr class="required">*</abbr>':""}</span>\n            </td>\n            <td class="fewc-section-field-label">\n            ${c.label||c.meta_key.replace(t+"_","")||""}\n            </td>\n            <td class="fewc-section-field-type">\n            ${c.type||"text"}\n            </td>\n            <td class="fewc-section-field-action">\n            <span class="fewc-section-field-edit" title="${vifewc_param.i18n.edit}"><i class="vi-ui icon edit outline"></i></span>\n            <span class="fewc-section-field-enable${l?"":" vifewc-hidden"}" title="${vifewc_param.i18n.disable}"><i class="dashicons dashicons-visibility"></i></span>\n            <span class="fewc-section-field-disable${l?" vifewc-hidden":""}" title="${vifewc_param.i18n.enable}"><i class="dashicons dashicons-hidden"></i></span>\n            </td>\n            </tr>`,d=e(d),!c.is_custom&&n[i]||d.find(".fewc-section-field-edit").after(`\n                <span class="fewc-section-field-clone" title="${vifewc_param.i18n.clone}"><i class="vi-ui icon clone outline"></i></span>\n                <span class="fewc-section-field-remove" title="${vifewc_param.i18n.remove}"><i class="vi-ui icon trash alternate outline"></i></span>`),d.addClass("fewc-section-field-wrap-"+i).data({id:i,data:c}),e(".fewc-section-fields-wrap table tbody").append(d)}),e(".fewc-section-fields-sort").sortable({connectWith:".fewc-section-field-wrap",handle:"td",cancel:".fewc-section-field-action",placeholder:"vifewc-placeholder",axis:"y",helper:function(i,t){let c=t.children(),n=t.clone();return n.children().each(function(i){e(this).width(c.eq(i).outerWidth()),e(this).css({"border-bottom":"1px solid rgba(34, 36, 38, .1)"})}),n},stop:function(i,t){e(document).trigger("vifewc_checkout_fields_sortable")}}),e(".fewc-loading-btn").addClass("vifewc-hidden"),e(".fewc-section-fields-wrap").removeClass("vifewc-hidden"),e(document).trigger("vifewc_after_checkout_fields_html")}),e(document).on("vifewc_after_checkout_fields_html",function(){let i=new URL(location.href),t=i.searchParams.get("field_edit");t&&e(".fewc-section-field-wrap-"+t).length&&(i.searchParams.delete("field_edit"),window.history.pushState({},"",i.href),e(".fewc-section-field-wrap-"+t).find(".fewc-section-field-edit").trigger("click"))}),e(document).on("vifewc_checkout_fields_sortable",function(){let i=vifewc_param.section_fields,t=e(".fewc-section-fields-wrap"),c=t.data("section_id");if(!c)return!1;let n={},d=1;t.find(".fewc-section-field-wrap").each(function(i,t){let c=e(t).data("data"),l=e(t).data("id");if(!l||!c||!Object.keys(c).length)return!1;c.priority=10*d,n[l]=c,e(t).data("data",c),d++}),i[c]=n,vifewc_param.section_fields=i,e(document).trigger("vifewc_checkout_fields_after_sortable")}),e(document).on("vifewc_popup_init",function(){e(".vi-ui.accordion:not(.vifewc-accordion-init)").addClass("vifewc-accordion-init").villatheme_accordion("refresh"),e(".vi-ui.dropdown:not(.vifewc-dropdown-init)").addClass("vifewc-dropdown-init").dropdown(),e(".vi-ui.checkbox:not(.vifewc-checkbox-init)").addClass("vifewc-checkbox-init").checkbox(),e(".vifewc-color:not(.vifewc-color-init)").each(function(){e(this).addClass("vifewc-color-init").css({backgroundColor:e(this).val()}).unbind().minicolors({change:function(i,t){e(this).parent().find(".vifewc-color").css({backgroundColor:i})},animationSpeed:50,animationEasing:"swing",changeDelay:0,control:"wheel",defaultValue:"",format:"rgb",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!0,position:"bottom left",show:null,showSpeed:100,theme:"default",swatches:[]})})}))});